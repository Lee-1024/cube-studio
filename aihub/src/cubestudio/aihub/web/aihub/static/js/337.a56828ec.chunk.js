"use strict";(self.webpackChunkcbapp_frontend=self.webpackChunkcbapp_frontend||[]).push([[337],{7449:function(e,n,a){a.r(n),a.d(n,{default:function(){return K}});var i=a(1413),l=a(9439),t=a(3738),r=a(4259),s=a(3018),c=a(2625),o=a(89),d=a(1243),u=a(4519),m=a(1202),f=a(7725),h=a.n(f),p=a(8851),v=a.n(p),x=(a(1541),a(4925)),g=a(4942),j=a(3433),b=a(5589),Z=a(2648),y=a(355),N=a(5262),k=a(4860),C=a(8060),w=a(7517),S=a(2556);function _(e){var n,a=Math.random().toString(36).substring(2),i=(0,u.useState)(e.options||[]),t=(0,l.Z)(i,2),r=t[0],s=t[1],c=(0,u.useState)(e.value||""),o=(0,l.Z)(c,2),d=o[0],m=o[1];(0,u.useEffect)((function(){var n=e.isOpenSearchMatch?(e.options||[]).filter((function(e){return-1!==e.indexOf(d)})):e.options||[];s(n)}),[e.options]),(0,u.useEffect)((function(){m(e.value||"")}),[e.value]);var f=function(n){m(n),e.onChange&&e.onChange(n)},h=function(e){var n=d,a=e.indexOf(d);if(-1===a)return(0,S.jsx)("span",{children:e});var i=e.substring(0,a),l=e.substring(a+d.length);return(0,S.jsxs)("span",{children:[i,(0,S.jsx)("span",{className:"highlight",children:n}),l]})},p=function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var i=arguments.length,l=new Array(i),t=0;t<i;t++)l[t]=arguments[t];clearTimeout(n),n=setTimeout((function(){e&&e.apply(null,[].concat(l))}),a)}}(e.onScrollButtom);return(0,S.jsxs)("div",{className:"select-down-modern",children:[e.labelName?(0,S.jsx)("label",{htmlFor:a,className:"pb4 mb0 fs12 d-b",children:e.labelName}):null,(0,S.jsxs)("div",{className:"p-r d-f ac",style:{width:e.width||"100%"},children:[(0,S.jsx)(b.Z,{style:{width:"100%"},disabled:e.disabled,id:a,placeholder:e.placeholder||"",maxLength:e.maxLength||200,onChange:function(e){return f(e.target.value)},onKeyPress:function(a){13===a.nativeEvent.keyCode&&(n.blur&&n.blur(),e.onSearch&&e.onSearch(a.currentTarget.value))},value:d,ref:function(e){return n=e}}),(0,S.jsx)(w.Z,{className:"p-a r0 mr8"})]}),r.length?(0,S.jsxs)("ul",{className:"select-option shadow",onScroll:function(n){n.stopPropagation();var a=n.currentTarget,i=a.scrollTop,l=a.clientHeight;a.scrollHeight-l-i<20&&e.onScrollButtom&&p()},style:{maxHeight:"".concat(e.maxHeight,"px")},children:[e.loading?(0,S.jsx)("div",{className:"p-s z9 ta-r",style:{right:"".concat(0,"px"),top:"".concat(0,"px")},children:(0,S.jsx)("div",{className:"d-il p-a",style:{right:"".concat(8,"px"),top:"".concat(0,"px")}})}):null,r.map((function(n,a){return(0,S.jsx)("li",{className:"ellip1",onMouseDown:function(){return function(n){f(n),e.onClick&&e.onClick(n)}(n)},children:h(n)},a)}))]}):null]})}var I=a(8501),L=a(3571),F=a(2914),M=a(8602),R=a(6903);function U(e){var n=(0,u.useState)(!1),a=(0,l.Z)(n,2),i=(a[0],a[1],(0,u.useState)(!1)),t=(0,l.Z)(i,2),r=(t[0],t[1]),s=(0,u.useState)(""),c=(0,l.Z)(s,2),d=(c[0],c[1],(0,u.useState)([])),m=(0,l.Z)(d,2),f=(m[0],m[1],(0,u.useState)(!0)),h=(0,l.Z)(f,2),p=(h[0],h[1],(0,u.useState)([])),v=(0,l.Z)(p,2),x=v[0],g=v[1];var b=function(e,n,a){var i=function(e){var n=null;return void 0!=window.createObjectURL?n=window.createObjectURL(e):void 0!=window.URL?n=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(n=window.webkitURL.createObjectURL(e)),n}(e),l=Math.random().toString(36).substring(2);return"video"===a?(0,S.jsxs)("div",{className:"p-r",children:[(0,S.jsx)("span",{onClick:function(){var e=(0,j.Z)(x);e.splice(n,1),g(e)},className:"d-il p-a plr8 ptb2 bg-fail",style:{top:0,right:0,borderBottomLeftRadius:6,zIndex:9},children:(0,S.jsx)(I.Z,{style:{color:"#fff"}})}),(0,S.jsx)("video",{className:"w100 mb8",src:i,controls:!0})]},l):"audio"===a?(0,S.jsxs)("div",{className:"d-f ac mb8",children:[(0,S.jsx)("audio",{className:"w100 flex1",src:i,controls:!0}),(0,S.jsx)("span",{onClick:function(){var e=(0,j.Z)(x);e.splice(n,1),g(e)},className:"d-il plr8 ptb2 bg-fail",style:{borderRadius:6},children:(0,S.jsx)(I.Z,{style:{color:"#fff"}})})]},l):e};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{children:x.map((function(n,a){return b(n,a,e.type||"file")}))}),(0,S.jsxs)(R.Z.Dragger,{fileList:x,showUploadList:!1,customRequest:function(n){console.log(n.file);var a=[].concat((0,j.Z)(x),[n.file]);g(a),Promise.all(a.map((function(e){return n=e,console.log("file2Bin",n),new Promise((function(e,a){if(n){n.name.replace(/.+\./,""),n.name;var i=new FileReader;i.readAsDataURL(n),i.onload=function(){e(i.result)}}else a(void 0)}));var n}))).then((function(n){console.log(n),e.onChange&&e.onChange(n)}))},beforeUpload:function(n){var a;console.log("file",n);var i=e.maxCount||1;if(x.length>=i)return o.ZP.error("\u8d85\u51fa\u6587\u4ef6\u6570\u91cf\u9650\u5236"),!1;var l=null===(a=e.format)||void 0===a?void 0:a.includes(n.type);l||o.ZP.error("\u6587\u4ef6\u683c\u5f0f\u9519\u8bef");var t=n.size<(e.maxSize||2097152);return t||o.ZP.error("\u6587\u4ef6\u5927\u5c0f\u9650\u5236"),l&&t},onChange:function(n){if(console.log(n),"uploading"!==n.file.status)return"done"===n.file.status&&(r(!1),g(n.fileList),e.onChange&&e.onChange(n.fileList)),"removed"===n.file.status?(g(n.fileList),void(e.onChange&&e.onChange(n.fileList))):void 0;r(!0)},children:[(0,S.jsxs)("p",{className:"ant-upload-drag-icon",children:["file"!==e.type&&e.type?null:(0,S.jsx)(L.Z,{}),"video"===e.type?(0,S.jsx)(F.Z,{}):null,"audio"===e.type?(0,S.jsx)(M.Z,{}):null]}),(0,S.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u6587\u4ef6\u4e0a\u4f20"})]})]})}var V=a(1662),T=a(2064);function P(e){var n=(0,u.useState)(!1),a=(0,l.Z)(n,2),i=(a[0],a[1],(0,u.useState)(!1)),t=(0,l.Z)(i,2),r=t[0],s=t[1],c=(0,u.useState)(""),d=(0,l.Z)(c,2),m=(d[0],d[1],(0,u.useState)([])),f=(0,l.Z)(m,2),h=f[0],p=f[1],v=(0,u.useState)(!0),x=(0,l.Z)(v,2);x[0],x[1];return(0,S.jsxs)("div",{className:"d-f fw",children:[h.map((function(n,a){var i=Math.random().toString(36).substring(2);return(0,S.jsxs)("div",{className:"image-card s0 mr16 mb16 ov-h",children:[(0,S.jsx)("div",{className:"image-close",onClick:function(){var n=(0,j.Z)(h);n.splice(a,1),p(n),e.onChange&&e.onChange(n)},children:(0,S.jsx)(V.Z,{style:{color:"#fff"}})}),(0,S.jsx)("img",{src:n,alt:"file",style:{width:"100%"}})]},i)})),h.length<(e.maxCount||1)?(0,S.jsx)(R.Z,{name:"file",listType:"picture-card",className:"file-uploader",showUploadList:!1,method:"POST",customRequest:function(n){console.log(n.file),function(e,n){var a=new FileReader;a.addEventListener("load",(function(){return n(a.result)})),a.readAsDataURL(e)}(n.file,(function(n){var a=[].concat((0,j.Z)(h),[n]);p(a),s(!1),e.onChange&&e.onChange(a)}))},beforeUpload:function(n){var a=e.maxCount||1;if(h.length>=a)return o.ZP.error("\u8d85\u51fa\u6587\u4ef6\u6570\u91cf\u9650\u5236"),!1;var i="image/jpeg"===n.type||"image/png"===n.type||"image/gif"===n.type||"image/jpg"===n.type;i||o.ZP.error("\u4ec5\u652f\u6301 JPG/PNG \u683c\u5f0f\u56fe\u7247");var l=n.size/1024/1024<10;return l||o.ZP.error("\u56fe\u7247\u5927\u5c0f\u5e94\u5c0f\u4e8e 10MB"),i&&l},onChange:function(e){console.log(e),"uploading"!==e.file.status?"done"===e.file.status&&s(!1):s(!0)},children:(0,S.jsxs)("div",{children:[r?(0,S.jsx)(T.Z,{}):(0,S.jsx)(C.Z,{}),(0,S.jsx)("div",{style:{marginTop:8},children:"\u4e0a\u4f20\u56fe\u7247"})]})}):null]})}function O(e){var n=Math.random().toString(36).substring(2),a=function(n){e.onChange&&e.onChange(n)};return(0,S.jsxs)("div",{className:["checkbox-box-normalize mr16 d-il",e.className].join(" "),children:[void 0===e.checked?(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,name:e.name||"",value:e.value,defaultChecked:e.defaultChecked||!1,onChange:a}):(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,name:e.name||"",value:e.value,checked:e.checked,onChange:a}),(0,S.jsx)("span",{className:"checkbox-hook ta-c",children:(0,S.jsx)("span",{className:"checkbox-hook-in fs12 op0",children:"\u2713"})}),(0,S.jsx)("label",{htmlFor:n,className:"p-r z10 pl8",children:e.label||""})]})}var H=function(e){return function(n){var a=Math.random().toString(36).substring(2),l=function(e,n){if(Array.isArray(e))return-1!==e.indexOf(n)},t=function(e){var a=e.target,i=a.value,l=a.checked,t=[],r=[];if(t=n.values?(0,j.Z)(n.values):(0,j.Z)((null===n||void 0===n?void 0:n.defaultValue)||[]),l)r=[].concat((0,j.Z)(t),[i]);else{var s=t.indexOf(i);-1!==s&&(t.splice(s,1),r=(0,j.Z)(t))}n.onChange&&n.onChange(r)};return(0,S.jsx)("div",{className:n.className||"",children:n.option.map((function(r,s){var c={defaultChecked:l(n.defaultValue||[],r.value),checked:l(n.values||[],r.value),name:a,label:r.label,value:r.value,disabled:r.disabled||n.disabled,display:r.display,onChange:t};return(0,u.createElement)(e,(0,i.Z)((0,i.Z)({},c),{},{key:s}))}))})}};O.Group=H(O),O.GroupFontIn=H((function(e){var n=Math.random().toString(36).substring(2),a=function(n){e.onChange&&e.onChange(n),console.log(n)};return(0,S.jsxs)("div",{className:["checkbox-box-fontstyle d-il mr16 mb8",e.className].join(" "),children:[void 0===e.checked?(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,className:"d-n",name:e.name,value:e.value,defaultChecked:e.defaultChecked||!1,onChange:a}):(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,className:"d-n",name:e.name,value:e.value,checked:e.checked,onChange:a}),(0,S.jsx)("label",{htmlFor:n,className:"checkbox-fontstyle mb0",children:(0,S.jsx)("span",{className:"m0",children:e.label||""})})]})})),O.GroupBorder=H((function(e){var n=Math.random().toString(36).substring(2),a=function(n){e.onChange&&e.onChange(n)};return(0,S.jsxs)("div",{className:"trigger-box-border d-il mr16 mb8",children:[void 0===e.checked?(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,className:"d-n",name:e.name,value:e.value,defaultChecked:e.defaultChecked||!1,onChange:a}):(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,className:"d-n",name:e.name,value:e.value,checked:e.checked,onChange:a}),(0,S.jsx)("label",{htmlFor:n,className:"trigger-border mb0",children:(0,S.jsx)("span",{className:"m0",children:e.label||""})})]})})),O.GroupImageIn=H((function(e){var n=Math.random().toString(36).substring(2),a=function(n){e.onChange&&e.onChange(n)};return(0,S.jsxs)("div",{className:["checkbox-box-imgstyle d-il mr16 mb8",e.className].join(" "),children:[void 0===e.checked?(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,className:"d-n",name:e.name,value:e.value,defaultChecked:e.defaultChecked||!1,onChange:a}):(0,S.jsx)("input",{id:n,trigger:"core",type:"checkbox",disabled:e.disabled,className:"d-n",name:e.name,value:e.value,checked:e.checked,onChange:a}),(0,S.jsxs)("label",{htmlFor:n,className:"checkbox-imgstyle mb0",children:[(0,S.jsx)("img",{src:"".concat(e.label),alt:""}),(0,S.jsx)("p",{className:"m0",children:e.value}),(0,S.jsx)("div",{className:"checkbox-mark",children:(0,S.jsx)("span",{children:"\u2713"})})]})]})}));var z=["key","name"];function A(e){var n=(0,u.useState)(0),a=(0,l.Z)(n,2),t=a[0],c=a[1],o=(0,u.useState)(e.config),d=(0,l.Z)(o,2),m=d[0],f=d[1],h=(0,u.useRef)(e.config),p=function(e){h.current=e,f(e)},v=(0,u.useState)(e.configGroup),w=(0,l.Z)(v,2),I=w[0],L=w[1],F=(0,u.useRef)(e.configGroup),M=function(e){F.current=e,L(e)},R=function(n,a){var l=function(n,a){var i=a.filter((function(e){return e.dep.includes(n)})).map((function(n){var a=n.dep.map((function(n){var a;return null===(a=e.form)||void 0===a?void 0:a.getFieldValue(n)})).filter((function(e){return!(void 0===e||null===e)})).reduce((function(e,n){return e+(n||"").split("").reduce((function(e,n){return e+n.charCodeAt(0)}),0)}),0);return{effect:n.effect,option:n.effectOption[a]||[]}}));return i}(n,a);l.forEach((function(n){var a;null===(a=e.form)||void 0===a||a.setFieldsValue((0,g.Z)({},n.effect,void 0)),function(e,n){var a=h.current?(0,j.Z)(h.current):[];if(a)for(var l=0;l<a.length;l++){var t=a[l];t.name===e&&(a[l]=(0,i.Z)((0,i.Z)({},t),n))}p(a)}(n.effect,{options:n.option}),function(e,n){for(var a=F.current?(0,j.Z)(F.current):[],l=0;l<a.length;l++){for(var t=(0,j.Z)(a[l].config),r=0;r<t.length;r++){var s=t[r];s.name===e&&(t[r]=(0,i.Z)((0,i.Z)({},s),n))}a[l]=(0,i.Z)((0,i.Z)({},a[l]),{},{config:t})}M(a)}(n.effect,{options:n.option})}))};(0,u.useEffect)((function(){if(e.formChangeRes&&e.linkageConfig){var n=e.formChangeRes.currentChange;R(Object.keys(n)[0],e.linkageConfig)}}),[e.formChangeRes]),(0,u.useEffect)((function(){var n;p(e.config),M(e.configGroup);var a=(null===(n=e.form)||void 0===n?void 0:n.getFieldsValue())||{};Object.entries(a).forEach((function(n){var a=(0,l.Z)(n,2),i=a[0];void 0!==a[1]&&R(i,e.linkageConfig||[])}))}),[e.configGroup,e.config]);var V=function(){c(t+1)},T=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(P,{maxCount:e.data.maxCount})}),"dynamicForm_".concat(e.name))},H=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(U,{})}),"dynamicForm_".concat(e.name))},A=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(U,{type:"video",maxSize:104857600,format:["video/mp4","video/aiv","video/3gp","video/3gpp","video/mov"]})}),"dynamicForm_".concat(e.name))},E=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(U,{type:"audio",maxSize:10485760,format:["audio/mpeg","audio/wav"]})}),"dynamicForm_".concat(e.name))},G=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(b.Z,{disabled:e.disable,placeholder:"\u8bf7\u8f93\u5165".concat(e.label)})}),"dynamicForm_".concat(e.name))},D=function(e,n){var a=(e.options||[]).map((function(e){return e.label}));return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(_,{isOpenSearchMatch:!0,disabled:e.disable,placeholder:"\u8bf7\u9009\u62e9".concat(e.label),options:a})}),"dynamicForm_".concat(e.name))},q=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue,extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(b.Z.TextArea,{autoSize:{minRows:4},disabled:e.disable,placeholder:"\u8bf7\u8f93\u5165".concat(e.label)})}),"dynamicForm_".concat(e.name))},B=function(n,a){var l=n.options||[];return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:n.label,name:n.name,rules:n.rules,initialValue:n.defaultValue,extra:n.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:n.description}}):null},a),{},{children:(0,S.jsx)(N.Z,{onClick:function(){var n;console.log("click",null===(n=e.form)||void 0===n?void 0:n.getFieldsValue())},style:{width:"100%"},mode:n.multiple?"multiple":void 0,onChange:function(a){n.data.retry_info&&e.onRetryInfoChange&&e.onRetryInfoChange(a)},showSearch:!0,disabled:n.disable,optionFilterProp:"label",placeholder:"\u8bf7\u9009\u62e9".concat(n.label),options:l})}),"dynamicForm_".concat(n.name))},K=function(e,n){var a=e.options||[];return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,initialValue:e.defaultValue,valuePropName:"values",extra:e.description?(0,S.jsx)("span",{dangerouslySetInnerHTML:{__html:e.description}}):null},n),{},{children:(0,S.jsx)(O.GroupImageIn,{option:a})}),"dynamicForm_".concat(e.name))},J=function(e,n){var a=e.options||[];return(0,S.jsx)(r.Z.Item,(0,i.Z)((0,i.Z)({label:e.label,name:e.name,rules:e.rules,initialValue:e.defaultValue},n),{},{children:(0,S.jsx)(Z.ZP.Group,{options:a})}),"dynamicForm_".concat(e.name))},Q=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)({label:e.label,name:"fromDate",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4"}]},n),"dynamicForm_".concat(e.name))},W=function(e,n){return(0,S.jsx)(r.Z.Item,(0,i.Z)({label:e.label,name:"fromDate",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u65f6\u95f4"}]},n),"dynamicForm_".concat(e.name))},X=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case"imageSelect":return K(e,n);case"imageUpload":return T(e,n);case"fileUpload":return H(e,n);case"videoUpload":return A(e,n);case"audioUpload":return E(e,n);case"input":case"match-input":return G(e,n);case"input-select":return D(e,n);case"textArea":return q(e,n);case"select":return B(e,n);case"datePicker":return Q(e,n);case"rangePicker":return W(e,n);case"radio":return J(e,n);default:return null}},Y=function(e){return(e||[]).map((function(e){return e.list&&e.list.length?(0,S.jsx)(r.Z.List,{name:e.name,children:function(n,a){var l=a.add,t=a.remove;return(0,S.jsxs)(S.Fragment,{children:[n.map((function(n){var a=n.key,l=n.name,c=(0,x.Z)(n,z);return(0,S.jsxs)("div",{className:"bor b-side pt32 plr16 mb16",children:[e.list&&e.list.map((function(e){return X(e,(0,i.Z)((0,i.Z)({},c),{},{name:[l,e.name]}))})),(0,S.jsx)(r.Z.Item,{wrapperCol:{offset:5},children:(0,S.jsx)(s.Z,{danger:!0,onClick:function(){return t(l)},block:!0,icon:(0,S.jsx)(k.Z,{}),children:"\u5220\u9664\u8be5\u9879"})})]},a)})),(0,S.jsx)(r.Z.Item,{noStyle:!0,className:"w100",children:(0,S.jsx)(s.Z,{type:"dashed",className:"w100",onClick:function(){return l()},block:!0,icon:(0,S.jsx)(C.Z,{}),children:"\u589e\u52a0\u4e00\u9879"})})]})}},"dynamicForm_".concat(e.name)):X(e)}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(r.Z.Item,{name:e.primaryKey||"id",noStyle:!0,hidden:!0,children:(0,S.jsx)(b.Z,{})},"dynamicForm_id"),I&&I.length?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(y.Z,{current:t,children:(I||[]).map((function(e,n){return(0,S.jsx)(y.Z.Step,{title:e.group},n)}))}),(0,S.jsx)("div",{className:"pt32",children:(I||[]).map((function(e,n){return(0,S.jsx)("div",{className:[t===n?"p-r z9":"p-a z-99 v-h l-10000"].join(" "),children:Y(e.config)},n)}))}),(0,S.jsxs)("div",{className:"ta-c pt32",children:[t>0&&(0,S.jsx)(s.Z,{onClick:function(){c(t-1)},children:"\u4e0a\u4e00\u6b65"}),t<(I||[]).length-1&&(0,S.jsx)(s.Z,{type:"primary",className:"ml16",onClick:function(){if(e.form){var n=I[t].config.map((function(e){return e.name}));e.form.validateFields(n).then((function(){V()})).catch((function(e){console.log(e)}))}else V()},children:"\u4e0b\u4e00\u6b65"}),(0,S.jsx)("div",{children:t===(I||[]).length-1&&(0,S.jsx)("div",{className:"pt8 c-hint-b",children:"\u70b9\u51fb\u786e\u5b9a\u5b8c\u6210\u63d0\u4ea4"})})]})]}):Y(m||[])]})}var E=a(332);function G(e){return(0,S.jsx)("div",{className:"loading-container",children:(0,S.jsxs)("div",{className:"g-container",children:[(0,S.jsxs)("div",{className:"g-number",children:[e.value,"%"]}),(0,S.jsxs)("div",{className:"g-contrast",children:[(0,S.jsx)("div",{className:"g-circle"}),(0,S.jsxs)("ul",{className:"g-bubbles",children:[(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{}),(0,S.jsx)("li",{})]})]}),e.content]})})}var D=a(7143),q=function(e){new Promise((function(e,n){var a=window.location.href;m.Z.get("http://www.data-master.net:8880/wechat/jsapi",{params:{url:a}}).then((function(a){var i=a.data;0==i.code&&(D.config({debug:!0,appId:i.data.appId,timestamp:i.data.timestamp,nonceStr:i.data.nonceStr,signature:i.data.signature,jsApiList:["showOptionMenu","hideMenuItems","showMenuItems","onMenuShareTimeline","onMenuShareAppMessage","updateAppMessageShareData","updateTimelineShareData"]}),D.ready((function(n){e(D,n)})),D.error((function(e){n(D,e)})))}))})).then((function(n){console.log(n),n.ready((function(){alert("wxsdk\u521d\u59cb\u5316\u5b8c\u6210"),setTimeout((function(){n.updateAppMessageShareData({title:e.title,link:e.link,desc:e.desc,imgUrl:e.imgUrl,type:"link",success:function(){},cancel:function(){alert("\u5206\u4eab\u5931\u8d25")}})}),500)}))}))},B=v()(h());function K(){var e=(0,u.useState)(),n=(0,l.Z)(e,2),a=n[0],f=n[1],h=(0,u.useState)([]),p=(0,l.Z)(h,2),v=p[0],x=p[1],g=(0,u.useState)([]),j=(0,l.Z)(g,2),b=j[0],Z=j[1],y=(0,u.useState)([]),N=(0,l.Z)(y,2),k=(N[0],N[1],(0,u.useState)(!1)),C=(0,l.Z)(k,2),w=C[0],_=C[1],I=r.Z.useForm(),L=(0,l.Z)(I,1)[0],F=(0,E.TH)(),M=(0,u.useState)(0),R=(0,l.Z)(M,2),U=R[0],V=R[1],T=(0,u.useRef)(U),P=function(e){T.current=e,V(e)};(0,u.useEffect)((function(){-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger")&&q({title:null===a||void 0===a?void 0:a.name,link:window.location.href,desc:null===a||void 0===a?void 0:a.describe,imgUrl:null===a||void 0===a?void 0:a.pic})}),[]),(0,u.useEffect)((function(){var e=setInterval((function(){T.current<99&&P(T.current+1)}),1e3);return function(){clearInterval(e)}}),[]),(0,u.useEffect)((function(){var e;(e=F.pathname,m.Z.get("".concat(e,"/info"))).then((function(e){var n=e.data;f(n);var a=O(n.inference_inputs,{},{});x(a)})).catch((function(e){})).finally((function(){}))}),[]);var O=function e(n,a,l){var t={text:"input",text_select:"select",text_select_multi:"select",image:"imageUpload",video:"videoUpload",audio:"audioUpload",file:"fileUpload",image_multi:"imageUpload",video_multi:"videoUpload",image_select:"imageSelect",image_select_multi:"imageSelect"};return n.map((function(n,r){var s=t[n.type],c=n.label||a[n.name],o=((n.validators||[]).map((function(e){if("select"===s)return"DataRequired"===e.type?{required:!0,message:"\u8bf7\u9009\u62e9".concat(c)}:void 0;switch(e.type){case"DataRequired":return{required:!0,message:"\u8bf7\u8f93\u5165".concat(c)};case"Regexp":return{pattern:new RegExp("".concat(e.regex)),message:"\u8bf7\u6309\u6b63\u786e\u7684\u89c4\u5219\u8f93\u5165"};case"Length":return{min:e.min||0,max:e.max,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u957f\u5ea6"};default:return}})).filter((function(e){return!!e})),e(n.info||[],a,l));return{label:c,type:s,list:o,name:n.name,disable:n.disable,description:n.describe||void 0,required:n.required,defaultValue:""===n.default?void 0:n.default,multiple:n["ui-type"]&&"select2"===n["ui-type"],options:(n.values||[]).map((function(e){return{label:e.value,value:e.id}})),data:(0,i.Z)({},n)}}))};return(0,S.jsxs)("div",{children:[w?(0,S.jsx)(G,{value:U,content:(0,S.jsxs)("div",{className:"ta-c",children:[(0,S.jsx)("div",{className:"c-text-w fs18 pb8",children:"\u7ed3\u679c\u751f\u6210\u4e2d\uff0c\u7a0d\u7b49\u7247\u523b"}),(0,S.jsx)(s.Z,{onClick:function(){_(!1)},children:"\u9000\u51fa\u7b49\u5f85"})]})}):null,(0,S.jsx)("div",{style:{display:"none"},children:(0,S.jsx)("img",{style:{width:300,height:300},src:null===a||void 0===a?void 0:a.pic,alt:""})}),(0,S.jsxs)("div",{className:"p16 bg-w",children:[(0,S.jsx)("div",{children:(0,S.jsx)("img",{className:"w100 pb8",style:{maxHeight:600},src:(null===a||void 0===a?void 0:a.pic)||"",alt:""})}),(0,S.jsxs)("div",{className:"fs20 pb4",onClick:function(){window.open(null===a||void 0===a?void 0:a.doc,"blank")},children:[(0,S.jsxs)("strong",{children:[null===a||void 0===a?void 0:a.name," [",null===a||void 0===a?void 0:a.label,"]"]})," ",(0,S.jsx)("span",{children:(0,S.jsx)(t.Z,{})})]}),(0,S.jsx)("div",{className:"pb4",children:null===a||void 0===a?void 0:a.describe}),(0,S.jsxs)("div",{children:[(0,S.jsx)(c.Z,{color:"volcano",children:null===a||void 0===a?void 0:a.scenes}),(0,S.jsx)(c.Z,{color:"green",children:null===a||void 0===a?void 0:a.status})]}),(0,S.jsx)("div",{children:(0,S.jsx)(s.Z,{onClick:function(){q({title:null===a||void 0===a?void 0:a.name,link:window.location.href,desc:null===a||void 0===a?void 0:a.describe,imgUrl:null===a||void 0===a?void 0:a.pic})},children:"\u5206\u4eab\u5230\u5fae\u4fe1"})})]}),(0,S.jsx)("div",{className:"ta-r pr16 c-hint-b",children:null===a||void 0===a?void 0:a.version}),(0,S.jsx)("div",{className:"ta-c pb8",children:(0,S.jsx)("div",{className:"title-mobi",children:"\u5e94\u7528\u6f14\u793a"})}),(0,S.jsxs)("div",{className:"p16 mb16",children:[(0,S.jsx)(r.Z,{layout:"horizontal",form:L,children:(0,S.jsx)(A,{form:L,primaryKey:"target",config:v})}),(0,S.jsx)("div",{className:"ta-c",children:(0,S.jsx)(s.Z,{type:"primary",block:!0,onClick:function(){L.validateFields().then((function(e){var n,i;console.log(e),_(!0),P(0),(n=(null===a||void 0===a?void 0:a.inference_url)||"",i=e,m.Z.post(n,i)).then((function(e){Z(e.data.result)})).catch((function(e){o.ZP.error("\u5e94\u7528\u8fd0\u884c\u51fa\u95ee\u9898\u4e86")})).finally((function(){_(!1)}))})).catch((function(e){o.ZP.warn("\u8bf7\u586b\u5199\u5b8c\u6574\u53c2\u6570")}))},children:"\u8fd0\u884c\u5e94\u7528"})})]}),(0,S.jsxs)("div",{className:"mb16",children:[(0,S.jsx)("div",{className:"ta-c pb8",children:(0,S.jsx)("div",{className:"title-mobi",children:"\u8f93\u51fa"})}),b.length?(0,S.jsx)("div",{className:"p16",children:b.map((function(e,n){return(0,S.jsxs)("div",{className:"mb32",children:[(0,S.jsxs)("div",{className:"ta-c fs20 pb8",children:["\u7ed3\u679c",n+1]}),e.text?(0,S.jsxs)("div",{className:"paper p16",children:[(0,S.jsx)("span",{children:"\u6587\u672c\u7ed3\u679c\uff1a"}),e.text]}):null,e.image?(0,S.jsxs)("div",{className:"paper p16 mt16",children:[(0,S.jsx)("div",{className:"pb8",children:"\u56fe\u7247\u7ed3\u679c\uff1a"}),(0,S.jsx)("img",{className:"w100",src:e.image,alt:""})]}):null,e.video?(0,S.jsxs)("div",{className:"paper p16 mt16",children:[(0,S.jsx)("div",{className:"pb8",children:"\u89c6\u9891\u7ed3\u679c\uff1a"}),(0,S.jsx)("video",{className:"w100",src:e.video,controls:!0})]}):null,e.audio?(0,S.jsxs)("div",{className:"paper p16 mt16",children:[(0,S.jsx)("div",{className:"pb8",children:"\u97f3\u9891\u7ed3\u679c\uff1a"}),(0,S.jsx)("audio",{className:"w100",src:e.audio,controls:!0})]}):null,e.html?(0,S.jsxs)("div",{className:"paper p16 mt16",children:[(0,S.jsx)("div",{className:"pb8",children:"\u8f93\u51fa\u7ed3\u679c\uff1a"}),(0,S.jsx)("div",{dangerouslySetInnerHTML:{__html:e.html}})]}):null]},n)}))}):(0,S.jsx)(d.ZP,{title:"\u6682\u65e0\u6570\u636e"})]}),(0,S.jsx)("div",{className:"ta-c pb8",children:(0,S.jsx)("div",{className:"title-mobi",children:"\u5e94\u7528\u63a8\u8350"})}),(0,S.jsx)("div",{className:"p16 mb64",children:(0,S.jsx)(B,{play:!0,cancelOnInteraction:!1,interval:5e3,children:((null===a||void 0===a?void 0:a.rec_apps)||[]).map((function(e,n){return(0,S.jsx)("div",{children:(0,S.jsx)("img",{className:"w100",src:e.pic,alt:""})},"rec".concat(n))}))})})]})}}}]);
//# sourceMappingURL=337.a56828ec.chunk.js.map